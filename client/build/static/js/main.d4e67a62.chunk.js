(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{68:function(e,a,t){e.exports=t(83)},73:function(e,a,t){},83:function(e,a,t){"use strict";t.r(a);var n=t(3),r=t.n(n),c=t(63),l=t.n(c),o=(t(73),t(16)),i=t(18),u=t(67);var s=function(e){return r.a.createElement("ul",{className:"nav"},r.a.createElement("div",{className:"nav-list"},["Your Cards","login","signup"].map((function(a){return r.a.createElement("li",{className:"nav-list",key:a},r.a.createElement("a",{id:"nav-list-a",href:"#"+a,onClick:function(){return e.handlePageChange(a)},className:e.currentPage===a?"nav-link active":"nav-link"},a))}))))},m=t(23),d=t.n(m),v=t(26),f=t(20),p=t(46),b=t(24),g=t(10),E=t.n(g);function h(){var e=Object(b.a)(["\nmutation addCards($frontText: String!, $backText: String!) {\n  addCard(frontText:$frontText, backText: $backText) {\n      _id\n      frontText\n    \tbackText\n  }\n}\n"]);return h=function(){return e},e}function w(){var e=Object(b.a)(["\n  mutation addUser($username: String!, $email: String!, $password: String!) {\n    addUser(username: $username, email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]);return w=function(){return e},e}function j(){var e=Object(b.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]);return j=function(){return e},e}var k=E()(j()),y=E()(w()),O=E()(h());function N(){var e=Object(b.a)(["\n    query me {\n      username\n        cards{\n          _id\n          frontText\n          backText\n        }\n    }\n  "]);return N=function(){return e},e}function x(){var e=Object(b.a)(["\n  query cards{\n    cards {\n      _id\n      frontText\n      backText\n    }\n  } \n  "]);return x=function(){return e},e}function S(){var e=Object(b.a)(["\nquery users{\n    users {\n      username\n      email\n    }\n  } \n"]);return S=function(){return e},e}E()(S());var T=E()(x()),C=E()(N()),$=function(){var e=Object(i.useQuery)(T).data,a=(null===e||void 0===e?void 0:e.cards)||[],t=Object(n.useState)(""),c=Object(o.a)(t,2),l=c[0],u=c[1],s=Object(n.useState)(""),m=Object(o.a)(s,2),b=m[0],g=m[1],E=Object(n.useState)(0),h=Object(o.a)(E,2),w=h[0],j=h[1],k=Object(i.useMutation)(O,{update:function(e,a){var t=a.data.addCard;try{var n=e.readQuery({query:T}).cards;e.writeQuery({query:T,data:{cards:[t].concat(Object(p.a)(n))}})}catch(c){console.error(c)}var r=e.readQuery({query:C}).me;e.writeQuery({query:C,data:{me:Object(f.a)(Object(f.a)({},r),{},{cards:[].concat(Object(p.a)(r.cards),[t])})}})}}),y=Object(o.a)(k,1)[0],N=function(){var e=Object(v.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,y({variables:{frontText:l,backText:b}});case 4:u(""),g(""),j(0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{className:"logincard"},r.a.createElement("div",{className:"login-card-outer"},r.a.createElement("div",{className:"login-card-header"},r.a.createElement("p",{className:"m-0 ".concat(280===w?"text-error":"")},"Character Count: ",w,"/280"),r.a.createElement("div",{className:"login-card-body"},r.a.createElement("form",{className:"flex-row justify-center justify-space-between-md align-stretch",onSubmit:N},r.a.createElement("textarea",{placeholder:"Enter Front Text",value:l,className:"form-input col-12 col-md-9",onChange:function(e){e.target.value.length<=280&&(u(e.target.value),j(e.target.value.length))}}),r.a.createElement("textarea",{placeholder:"Enter Back Text",value:b,className:"form-input col-12 col-md-9",onChange:function(e){e.target.value.length<=280&&(g(e.target.value),j(e.target.value.length))}}),r.a.createElement("button",{className:"btn col-12 col-md-3",type:"submit"},"Submit")))))),r.a.createElement("div",{className:"wholecard"},r.a.createElement("div",{className:"cardflip-div"},a.map((function(e){return r.a.createElement("div",{className:"flip-card"},r.a.createElement("div",{className:"flip-card-inner",key:e.id},r.a.createElement("div",{className:"flip-card-front"},r.a.createElement("br",null),r.a.createElement("br",null),e.frontText),r.a.createElement("div",{className:"flip-card-back"},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),e.backText)))})))))},P=t(27),q=t(65),_=t(66),I=t(45),Q=t.n(I),Y=new(function(){function e(){Object(q.a)(this,e)}return Object(_.a)(e,[{key:"getProfile",value:function(){return Q()(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return Q()(e).exp<Date.now()/1e3}catch(a){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}()),B=function(e){var a=Object(n.useState)({email:"",password:""}),t=Object(o.a)(a,2),c=t[0],l=t[1],u=Object(i.useMutation)(k),s=Object(o.a)(u,2),m=s[0],p=s[1].error,b=function(e){var a=e.target,t=a.name,n=a.value;l(Object(f.a)(Object(f.a)({},c),{},Object(P.a)({},t,n)))},g=function(){var e=Object(v.a)(d.a.mark((function e(a){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,m({variables:Object(f.a)({},c)});case 4:t=e.sent,n=t.data,Y.login(n.login.token),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement("main",{className:"login flex-row justify-center mb-4"},r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("div",{className:"logincard"},r.a.createElement("div",{className:"login-card-outer"},r.a.createElement("h4",{className:"login-card-header"},"Login"),r.a.createElement("div",{className:"login-card-body"},r.a.createElement("form",{onSubmit:g},r.a.createElement("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",id:"email",value:c.email,onChange:b}),r.a.createElement("input",{className:"form-input",placeholder:"******",name:"password",type:"password",id:"password",value:c.password,onChange:b}),r.a.createElement("button",{className:"btn d-block w-100",type:"submit"},"Submit"))),p&&r.a.createElement("div",null,"Login failed")))))},D=function(){var e=Object(n.useState)({username:"",email:"",password:""}),a=Object(o.a)(e,2),t=a[0],c=a[1],l=Object(i.useMutation)(y),u=Object(o.a)(l,2),s=u[0],m=u[1].error,p=function(e){var a=e.target,n=a.name,r=a.value;c(Object(f.a)(Object(f.a)({},t),{},Object(P.a)({},n,r)))},b=function(){var e=Object(v.a)(d.a.mark((function e(a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,s({variables:Object(f.a)({},t)});case 4:n=e.sent,r=n.data,Y.login(r.addUser.token),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement("main",{className:"flex-row justify-center mb-4"},r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("div",{className:"logincard"},r.a.createElement("div",{className:"login-card-outer"},r.a.createElement("h4",{className:"login-card-header"},"Sign Up"),r.a.createElement("div",{className:"login-card-body"},r.a.createElement("form",{onSubmit:b},r.a.createElement("input",{className:"form-input",placeholder:"Your username",name:"username",type:"username",id:"username",value:t.username,onChange:p}),r.a.createElement("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",id:"email",value:t.email,onChange:p}),r.a.createElement("input",{className:"form-input",placeholder:"******",name:"password",type:"password",id:"password",value:t.password,onChange:p}),r.a.createElement("button",{className:"btn d-block w-100",type:"submit"},"Submit")),m&&r.a.createElement("div",null,"Sign up failed"))))))};var M=function(e){return r.a.createElement("div",{className:"bodycontainer"},r.a.createElement("div",{classname:"cardContainer"},function(e){switch(e){case"Your Cards":return r.a.createElement($,null);case"login":return r.a.createElement(B,null);case"signup":return r.a.createElement(D,null);default:return r.a.createElement(B,null)}}(e.currentPage)))},U=new u.a({request:function(e){var a=localStorage.getItem("id_token");e.setContext({headers:{authorization:a?"Bearer ".concat(a):""}})},uri:"/graphql"});var L=function(){var e=Object(n.useState)("Login"),a=Object(o.a)(e,2),t=a[0],c=a[1];return r.a.createElement(i.ApolloProvider,{client:U},r.a.createElement(i.ApolloProvider,{client:U},r.a.createElement(s,{currentPage:t,handlePageChange:c}),r.a.createElement(M,{currentPage:t,handlePageChange:c})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[68,1,2]]]);
//# sourceMappingURL=main.d4e67a62.chunk.js.map